import{n as ut,u as $t,s as Jt,r as Xt,a as te,i as ee,v as le}from"../chunks/CHokvJ-H.js";import{H as re,I as ne,d as E,S as Kt,i as Qt,f as Ct,n as et,r as Bt,a as Q,h as s,l as K,b as u,c as k,j as U,k as T,g as tt,e as y,s as x,p as M,t as F,m as lt,u as ae,w as dt,v as rt,y as Et,x as Tt,z as Pt,B as ie,o as Lt,D as oe,G as Vt,E as se,C as ue}from"../chunks/DjQ7aYyS.js";import{e as nt,u as ce,f as fe}from"../chunks/C_OXLtGw.js";const Yt=typeof window<"u";let de=Yt?()=>window.performance.now():()=>Date.now(),xt=Yt?r=>requestAnimationFrame(r):ut;const ft=new Set;function Zt(r){ft.forEach(t=>{t.c(r)||(ft.delete(t),t.f())}),ft.size!==0&&xt(Zt)}function he(r){let t;return ft.size===0&&xt(Zt),{promise:new Promise(e=>{ft.add(t={c:r,f:e})}),abort(){ft.delete(t)}}}const mt=new Map;let pt=0;function _e(r){let t=5381,e=r.length;for(;e--;)t=(t<<5)-t^r.charCodeAt(e);return t>>>0}function me(r,t){const e={stylesheet:ne(t),rules:{}};return mt.set(r,e),e}function pe(r,t,e,a,i,c,h,v=0){const f=16.666/a;let m=`{
`;for(let I=0;I<=1;I+=f){const D=t+(e-t)*c(I);m+=I*100+`%{${h(D,1-D)}}
`}const d=m+`100% {${h(e,1-e)}}
}`,n=`__svelte_${_e(d)}_${v}`,l=re(r),{stylesheet:o,rules:w}=mt.get(l)||me(l,r);w[n]||(w[n]=!0,o.insertRule(`@keyframes ${n} ${d}`,o.cssRules.length));const g=r.style.animation||"";return r.style.animation=`${g?`${g}, `:""}${n} ${a}ms linear ${i}ms 1 both`,pt+=1,n}function ve(r,t){const e=(r.style.animation||"").split(", "),a=e.filter(t?c=>c.indexOf(t)<0:c=>c.indexOf("__svelte")===-1),i=e.length-a.length;i&&(r.style.animation=a.join(", "),pt-=i,pt||ge())}function ge(){xt(()=>{pt||(mt.forEach(r=>{const{ownerNode:t}=r.stylesheet;t&&E(t)}),mt.clear())})}function be(r,t,e,a){if(!t)return ut;const i=r.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return ut;const{delay:c=0,duration:h=300,easing:v=$t,start:f=de()+c,end:m=f+h,tick:d=ut,css:n}=e(r,{from:t,to:i},a);let l=!0,o=!1,w;function g(){n&&(w=pe(r,0,1,h,c,v,n)),c||(o=!0)}function I(){n&&ve(r,w),l=!1}return he(D=>{if(!o&&D>=f&&(o=!0),o&&D>=m&&(d(1,0),I()),!l)return!1;if(o){const O=D-f,A=0+1*v(O/h);d(A,1-A)}return!0}),g(),d(0,1),I}function we(r){const t=getComputedStyle(r);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:e,height:a}=t,i=r.getBoundingClientRect();r.style.position="absolute",r.style.width=e,r.style.height=a,ke(r,i)}}function ke(r,t){const e=r.getBoundingClientRect();if(t.left!==e.left||t.top!==e.top){const a=getComputedStyle(r),i=a.transform==="none"?"":a.transform;r.style.transform=`${i} translate(${t.left-e.left}px, ${t.top-e.top}px)`}}function jt(r,t,e){const a=r.slice();return a[12]=t[e],a}function qt(r){let t,e,a;return{c(){t=y("div"),e=y("a"),a=F("Listen to audio"),this.h()},l(i){t=k(i,"DIV",{class:!0});var c=U(t);e=k(c,"A",{href:!0,target:!0,class:!0});var h=U(e);a=M(h,"Listen to audio"),h.forEach(E),c.forEach(E),this.h()},h(){u(e,"href",r[7]),u(e,"target","_blank"),u(e,"class","bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 mt-4"),u(t,"class","mb-4 pointer hover:cursor-pointer")},m(i,c){Q(i,t,c),s(t,e),s(e,a)},p(i,c){c&128&&u(e,"href",i[7])},d(i){i&&E(t)}}}function Rt(r){let t,e=r[12].name+"",a,i;return{c(){t=y("option"),a=F(e),this.h()},l(c){t=k(c,"OPTION",{});var h=U(t);a=M(h,e),h.forEach(E),this.h()},h(){t.__value=i=r[12].artist_id,et(t,t.__value)},m(c,h){Q(c,t,h),s(t,a)},p(c,h){h&8&&e!==(e=c[12].name+"")&&lt(a,e),h&8&&i!==(i=c[12].artist_id)&&(t.__value=i,et(t,t.__value))},d(c){c&&E(t)}}}function ye(r){let t,e,a,i,c,h,v,f,m,d,n,l,o,w,g,I,D,O,A,j="Art Piece Title",L,P,Y,q,z,B="Short Description",b,_,S,H,G,at="Description",it,J,vt,ot,Dt='<label for="image" class="block text-black dark:text-white mb-2">Upload Image</label> <input id="image" name="image" type="file" accept="image/*" class="w-full px-3 py-2 border rounded"/>',gt,ht,Z,St="Select Artist",bt,W,wt,$,Ot="Submit Art Piece",kt,X,At="Update Art Piece",yt,Nt,R=r[7]&&qt(r),ct=nt(r[3]),V=[];for(let C=0;C<ct.length;C+=1)V[C]=Rt(jt(r,ct,C));return{c(){t=y("form"),e=y("input"),a=x(),i=y("input"),c=x(),h=y("input"),v=x(),f=y("input"),d=x(),n=y("input"),l=x(),o=y("input"),g=x(),I=y("input"),D=x(),O=y("div"),A=y("label"),A.textContent=j,L=x(),P=y("input"),Y=x(),q=y("div"),z=y("label"),z.textContent=B,b=x(),_=y("input"),S=x(),H=y("div"),G=y("label"),G.textContent=at,it=x(),J=y("textarea"),vt=x(),ot=y("div"),ot.innerHTML=Dt,gt=x(),R&&R.c(),ht=x(),Z=y("label"),Z.textContent=St,bt=x(),W=y("select");for(let C=0;C<V.length;C+=1)V[C].c();wt=x(),$=y("button"),$.textContent=Ot,kt=x(),X=y("button"),X.textContent=At,this.h()},l(C){t=k(C,"FORM",{method:!0,enctype:!0,action:!0,class:!0});var p=U(t);e=k(p,"INPUT",{type:!0,name:!0}),a=T(p),i=k(p,"INPUT",{type:!0,name:!0}),c=T(p),h=k(p,"INPUT",{type:!0,name:!0}),v=T(p),f=k(p,"INPUT",{type:!0,name:!0}),d=T(p),n=k(p,"INPUT",{type:!0,name:!0}),l=T(p),o=k(p,"INPUT",{type:!0,name:!0}),g=T(p),I=k(p,"INPUT",{type:!0,name:!0}),D=T(p),O=k(p,"DIV",{class:!0});var N=U(O);A=k(N,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),tt(A)!=="svelte-nrwdyb"&&(A.textContent=j),L=T(N),P=k(N,"INPUT",{id:!0,name:!0,type:!0,class:!0}),N.forEach(E),Y=T(p),q=k(p,"DIV",{class:!0});var st=U(q);z=k(st,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),tt(z)!=="svelte-zlnkr1"&&(z.textContent=B),b=T(st),_=k(st,"INPUT",{id:!0,name:!0,type:!0,class:!0}),st.forEach(E),S=T(p),H=k(p,"DIV",{class:!0});var _t=U(H);G=k(_t,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),tt(G)!=="svelte-181jozs"&&(G.textContent=at),it=T(_t),J=k(_t,"TEXTAREA",{id:!0,name:!0,class:!0}),U(J).forEach(E),_t.forEach(E),vt=T(p),ot=k(p,"DIV",{class:!0,"data-svelte-h":!0}),tt(ot)!=="svelte-112qcar"&&(ot.innerHTML=Dt),gt=T(p),R&&R.l(p),ht=T(p),Z=k(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),tt(Z)!=="svelte-e5241q"&&(Z.textContent=St),bt=T(p),W=k(p,"SELECT",{id:!0,class:!0});var Ut=U(W);for(let It=0;It<V.length;It+=1)V[It].l(Ut);Ut.forEach(E),wt=T(p),$=k(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),tt($)!=="svelte-50glrn"&&($.textContent=Ot),kt=T(p),X=k(p,"BUTTON",{type:!0,formaction:!0,class:!0,"data-svelte-h":!0}),tt(X)!=="svelte-1ekhizx"&&(X.textContent=At),p.forEach(E),this.h()},h(){u(e,"type","hidden"),u(e,"name","room_id"),e.value=r[1],u(i,"type","hidden"),u(i,"name","wall"),i.value=r[2],u(h,"type","hidden"),u(h,"name","order"),h.value=r[5],u(f,"type","hidden"),u(f,"name","artist_id"),f.value=m=r[0].artist_id,u(n,"type","hidden"),u(n,"name","room"),n.value=r[4],u(o,"type","hidden"),u(o,"name","artwork_id"),o.value=w=r[0].artwork_id,u(I,"type","hidden"),u(I,"name","exhibition_id"),I.value=r[6],u(A,"for","title"),u(A,"class","block text-black dark:text-white mb-2"),u(P,"id","title"),u(P,"name","title"),u(P,"type","text"),u(P,"class","w-full px-3 py-2 border rounded text-black"),P.required=!0,u(O,"class","mb-4"),u(z,"for","short_description"),u(z,"class","block text-black dark:text-white mb-2"),u(_,"id","short_description"),u(_,"name","short_description"),u(_,"type","text"),u(_,"class","w-full px-3 py-2 border rounded text-black"),u(q,"class","mb-4"),u(G,"for","description"),u(G,"class","block text-black dark:text-white mb-2"),u(J,"id","description"),u(J,"name","description"),u(J,"class","w-full px-3 py-2 border rounded text-black"),J.required=!0,u(H,"class","mb-4"),u(ot,"class","mb-4"),u(Z,"for","artist_select"),u(Z,"class","sr-only"),u(W,"id","artist_select"),u(W,"class","bg-gray-700 text-white rounded-md p-2 mb-4 w-72"),r[0].artist_id===void 0&&te(()=>r[11].call(W)),u($,"type","submit"),u($,"class","bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 mt-4"),u(X,"type","submit"),u(X,"formaction","?/update_artwork"),u(X,"class","bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 mt-4 ml-2"),u(t,"method","POST"),u(t,"enctype","multipart/form-data"),u(t,"action","?/submit_artwork"),u(t,"class","mb-4 mr-4 float-left overflow-hidden")},m(C,p){Q(C,t,p),s(t,e),s(t,a),s(t,i),s(t,c),s(t,h),s(t,v),s(t,f),s(t,d),s(t,n),s(t,l),s(t,o),s(t,g),s(t,I),s(t,D),s(t,O),s(O,A),s(O,L),s(O,P),et(P,r[0].title),s(t,Y),s(t,q),s(q,z),s(q,b),s(q,_),et(_,r[0].short_description),s(t,S),s(t,H),s(H,G),s(H,it),s(H,J),et(J,r[0].description),s(t,vt),s(t,ot),s(t,gt),R&&R.m(t,null),s(t,ht),s(t,Z),s(t,bt),s(t,W);for(let N=0;N<V.length;N+=1)V[N]&&V[N].m(W,null);Bt(W,r[0].artist_id,!0),s(t,wt),s(t,$),s(t,kt),s(t,X),yt||(Nt=[K(P,"input",r[8]),K(_,"input",r[9]),K(J,"input",r[10]),K(W,"change",r[11])],yt=!0)},p(C,[p]){if(p&2&&(e.value=C[1]),p&4&&(i.value=C[2]),p&32&&(h.value=C[5]),p&9&&m!==(m=C[0].artist_id)&&(f.value=m),p&16&&(n.value=C[4]),p&9&&w!==(w=C[0].artwork_id)&&(o.value=w),p&64&&(I.value=C[6]),p&9&&P.value!==C[0].title&&et(P,C[0].title),p&9&&_.value!==C[0].short_description&&et(_,C[0].short_description),p&9&&et(J,C[0].description),C[7]?R?R.p(C,p):(R=qt(C),R.c(),R.m(t,ht)):R&&(R.d(1),R=null),p&8){ct=nt(C[3]);let N;for(N=0;N<ct.length;N+=1){const st=jt(C,ct,N);V[N]?V[N].p(st,p):(V[N]=Rt(st),V[N].c(),V[N].m(W,null))}for(;N<V.length;N+=1)V[N].d(1);V.length=ct.length}p&9&&Bt(W,C[0].artist_id)},i:ut,o:ut,d(C){C&&E(t),R&&R.d(),Ct(V,C),yt=!1,Xt(Nt)}}}function Ie(r,t,e){let{roomId:a}=t,{wall:i}=t,{form:c}=t,{artists:h}=t,{room:v}=t,{order:f}=t,{exhibition_id:m}=t,{audio_url:d="https://sdsirlozivhqmtcexwbu.supabase.co/storage/v1/object/public/bucket/audio/Safe_2024-12-20.mp3"}=t;function n(){c.title=this.value,e(0,c),e(3,h)}function l(){c.short_description=this.value,e(0,c),e(3,h)}function o(){c.description=this.value,e(0,c),e(3,h)}function w(){c.artist_id=ae(this),e(0,c),e(3,h)}return r.$$set=g=>{"roomId"in g&&e(1,a=g.roomId),"wall"in g&&e(2,i=g.wall),"form"in g&&e(0,c=g.form),"artists"in g&&e(3,h=g.artists),"room"in g&&e(4,v=g.room),"order"in g&&e(5,f=g.order),"exhibition_id"in g&&e(6,m=g.exhibition_id),"audio_url"in g&&e(7,d=g.audio_url)},[c,a,i,h,v,f,m,d,n,l,o,w]}class Ce extends Kt{constructor(t){super(),Qt(this,t,Ie,ye,Jt,{roomId:1,wall:2,form:0,artists:3,room:4,order:5,exhibition_id:6,audio_url:7})}}function Ee(r){const t=r-1;return t*t*t+1}function Te(r,{from:t,to:e},a={}){const i=getComputedStyle(r),c=i.transform==="none"?"":i.transform,[h,v]=i.transformOrigin.split(" ").map(parseFloat),f=t.left+t.width*h/e.width-(e.left+h),m=t.top+t.height*v/e.height-(e.top+v),{delay:d=0,duration:n=o=>Math.sqrt(o)*120,easing:l=Ee}=a;return{delay:d,duration:ee(n)?n(Math.sqrt(f*f+m*m)):n,easing:l,css:(o,w)=>{const g=w*f,I=w*m,D=o+w*t.width/e.width,O=o+w*t.height/e.height;return`transform: ${c} translate(${g}px, ${I}px) scale(${D}, ${O});`}}}function zt(r,t,e){const a=r.slice();return a[9]=t[e][0],a[10]=t[e][1],a}function Ht(r,t,e){const a=r.slice();return a[13]=t[e][0],a[14]=t[e][1],a}function Mt(r,t,e){const a=r.slice();return a[17]=t[e],a[19]=e,a}function Ft(r,t){let e,a,i=t[19]+1+"",c,h,v,f="×",m,d,n=t[13]+"",l,o,w,g,I,D,O,A=ut,j,L,P;function Y(){return t[5](t[17],t[9],t[13])}w=new Ce({props:{exhibition_id:t[0].exhibition_id,roomId:t[17].room,wall:t[13],form:t[17],artists:t[0].artists,order:t[19]+1,room:t[9],audio_url:t[17].audio_url}});function q(...B){return t[6](t[19],...B)}function z(...B){return t[7](t[19],t[9],t[13],...B)}return{key:r,first:null,c(){e=y("div"),a=y("div"),c=F(i),h=x(),v=y("button"),v.textContent=f,m=x(),d=y("div"),l=F(n),o=x(),ue(w.$$.fragment),g=x(),I=y("div"),D=x(),this.h()},l(B){e=k(B,"DIV",{class:!0,role:!0,draggable:!0});var b=U(e);a=k(b,"DIV",{class:!0});var _=U(a);c=M(_,i),_.forEach(E),h=T(b),v=k(b,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(v)!=="svelte-1n25wdi"&&(v.textContent=f),m=T(b),d=k(b,"DIV",{class:!0});var S=U(d);l=M(S,n),o=T(S),se(w.$$.fragment,S),S.forEach(E),g=T(b),I=k(b,"DIV",{class:!0,style:!0}),U(I).forEach(E),D=T(b),b.forEach(E),this.h()},h(){u(a,"class","artwork-number svelte-15u77du"),u(v,"class","absolute top-2 left-2 text-red-500 hover:text-red-700"),u(d,"class","flex flex-col"),u(I,"class","artwork-image w-[50%] svelte-15u77du"),Lt(I,"background-image","url('"+t[17].image_url+"')"),u(e,"class","artwork rounded-sm flex justify-between px-7 py-7 bg-gray-300/15 w-[60rem] relative svelte-15u77du"),u(e,"role","listitem"),u(e,"draggable","true"),this.first=e},m(B,b){Q(B,e,b),s(e,a),s(a,c),s(e,h),s(e,v),s(e,m),s(e,d),s(d,l),s(d,o),oe(w,d,null),s(e,g),s(e,I),s(e,D),j=!0,L||(P=[K(v,"click",Y),K(e,"dragstart",q),K(e,"dragover",Vt(t[4])),K(e,"drop",Vt(z))],L=!0)},p(B,b){t=B,(!j||b&2)&&i!==(i=t[19]+1+"")&&lt(c,i),(!j||b&2)&&n!==(n=t[13]+"")&&lt(l,n);const _={};b&1&&(_.exhibition_id=t[0].exhibition_id),b&2&&(_.roomId=t[17].room),b&2&&(_.wall=t[13]),b&2&&(_.form=t[17]),b&1&&(_.artists=t[0].artists),b&2&&(_.order=t[19]+1),b&2&&(_.room=t[9]),b&2&&(_.audio_url=t[17].audio_url),w.$set(_),(!j||b&2)&&Lt(I,"background-image","url('"+t[17].image_url+"')")},r(){O=e.getBoundingClientRect()},f(){we(e),A()},a(){A(),A=be(e,O,Te,{duration:300})},i(B){j||(rt(w.$$.fragment,B),j=!0)},o(B){dt(w.$$.fragment,B),j=!1},d(B){B&&E(e),ie(w),L=!1,Xt(P)}}}function Wt(r){let t,e,a=r[13]+"",i,c,h,v,f=r[13]+"",m,d,n,l=[],o=new Map,w,g,I,D=r[13]+"",O,A,j,L,P,Y,q=nt(r[14]);const z=b=>b[17].artwork_id;for(let b=0;b<q.length;b+=1){let _=Mt(r,q,b),S=z(_);o.set(S,l[b]=Ft(S,_))}function B(){return r[8](r[9],r[13])}return{c(){t=y("div"),e=y("h3"),i=F(a),c=F(" wall"),h=x(),v=y("div"),m=F(f),d=x(),n=y("div");for(let b=0;b<l.length;b+=1)l[b].c();w=x(),g=y("button"),I=F("Add art to "),O=F(D),A=F(" wall"),j=x(),this.h()},l(b){t=k(b,"DIV",{class:!0});var _=U(t);e=k(_,"H3",{class:!0});var S=U(e);i=M(S,a),c=M(S," wall"),S.forEach(E),h=T(_),v=k(_,"DIV",{class:!0});var H=U(v);m=M(H,f),d=T(H),n=k(H,"DIV",{class:!0});var G=U(n);for(let it=0;it<l.length;it+=1)l[it].l(G);G.forEach(E),H.forEach(E),w=T(_),g=k(_,"BUTTON",{class:!0});var at=U(g);I=M(at,"Add art to "),O=M(at,D),A=M(at," wall"),at.forEach(E),j=T(_),_.forEach(E),this.h()},h(){u(e,"class","text-2xl"),u(n,"class","artwork-scroll svelte-15u77du"),u(v,"class","form-container svelte-15u77du"),u(g,"class","bg-green-500 mt-5 text-white px-4 py-2 rounded-md hover:bg-green-600 mb-4"),u(t,"class","border border-solid border-gray-300 p-7 my-7")},m(b,_){Q(b,t,_),s(t,e),s(e,i),s(e,c),s(t,h),s(t,v),s(v,m),s(v,d),s(v,n);for(let S=0;S<l.length;S+=1)l[S]&&l[S].m(n,null);s(t,w),s(t,g),s(g,I),s(g,O),s(g,A),s(t,j),L=!0,P||(Y=K(g,"click",B),P=!0)},p(b,_){if(r=b,(!L||_&2)&&a!==(a=r[13]+"")&&lt(i,a),(!L||_&2)&&f!==(f=r[13]+"")&&lt(m,f),_&11){q=nt(r[14]),Tt();for(let S=0;S<l.length;S+=1)l[S].r();l=ce(l,_,z,1,r,q,o,n,fe,Ft,null,Mt);for(let S=0;S<l.length;S+=1)l[S].a();Et()}(!L||_&2)&&D!==(D=r[13]+"")&&lt(O,D)},i(b){if(!L){for(let _=0;_<q.length;_+=1)rt(l[_]);L=!0}},o(b){for(let _=0;_<l.length;_+=1)dt(l[_]);L=!1},d(b){b&&E(t);for(let _=0;_<l.length;_+=1)l[_].d();P=!1,Y()}}}function Gt(r){let t,e=r[9]+"",a,i,c,h,v=nt(Object.entries(r[10])),f=[];for(let d=0;d<v.length;d+=1)f[d]=Wt(Ht(r,v,d));const m=d=>dt(f[d],1,1,()=>{f[d]=null});return{c(){t=y("h2"),a=F(e),i=x();for(let d=0;d<f.length;d+=1)f[d].c();c=Pt(),this.h()},l(d){t=k(d,"H2",{class:!0});var n=U(t);a=M(n,e),n.forEach(E),i=T(d);for(let l=0;l<f.length;l+=1)f[l].l(d);c=Pt(),this.h()},h(){u(t,"class","text-3xl mb-4 ml-7")},m(d,n){Q(d,t,n),s(t,a),Q(d,i,n);for(let l=0;l<f.length;l+=1)f[l]&&f[l].m(d,n);Q(d,c,n),h=!0},p(d,n){if((!h||n&2)&&e!==(e=d[9]+"")&&lt(a,e),n&15){v=nt(Object.entries(d[10]));let l;for(l=0;l<v.length;l+=1){const o=Ht(d,v,l);f[l]?(f[l].p(o,n),rt(f[l],1)):(f[l]=Wt(o),f[l].c(),rt(f[l],1),f[l].m(c.parentNode,c))}for(Tt(),l=v.length;l<f.length;l+=1)m(l);Et()}},i(d){if(!h){for(let n=0;n<v.length;n+=1)rt(f[n]);h=!0}},o(d){f=f.filter(Boolean);for(let n=0;n<f.length;n+=1)dt(f[n]);h=!1},d(d){d&&(E(t),E(i),E(c)),Ct(f,d)}}}function xe(r){let t,e,a,i=r[0].exhibition_id+"",c,h,v,f=nt(Object.entries(r[1])),m=[];for(let n=0;n<f.length;n+=1)m[n]=Gt(zt(r,f,n));const d=n=>dt(m[n],1,1,()=>{m[n]=null});return{c(){t=y("div"),e=y("h1"),a=F("Utställning nr "),c=F(i),h=x();for(let n=0;n<m.length;n+=1)m[n].c();this.h()},l(n){t=k(n,"DIV",{class:!0});var l=U(t);e=k(l,"H1",{class:!0});var o=U(e);a=M(o,"Utställning nr "),c=M(o,i),o.forEach(E),h=T(l);for(let w=0;w<m.length;w+=1)m[w].l(l);l.forEach(E),this.h()},h(){u(e,"class","w-full text-center text-5xl pt-24 p-7"),u(t,"class","text-white")},m(n,l){Q(n,t,l),s(t,e),s(e,a),s(e,c),s(t,h);for(let o=0;o<m.length;o+=1)m[o]&&m[o].m(t,null);v=!0},p(n,[l]){if((!v||l&1)&&i!==(i=n[0].exhibition_id+"")&&lt(c,i),l&15){f=nt(Object.entries(n[1]));let o;for(o=0;o<f.length;o+=1){const w=zt(n,f,o);m[o]?(m[o].p(w,l),rt(m[o],1)):(m[o]=Gt(w),m[o].c(),rt(m[o],1),m[o].m(t,null))}for(Tt(),o=f.length;o<m.length;o+=1)d(o);Et()}},i(n){if(!v){for(let l=0;l<f.length;l+=1)rt(m[l]);v=!0}},o(n){m=m.filter(Boolean);for(let l=0;l<m.length;l+=1)dt(m[l]);v=!1},d(n){n&&E(t),Ct(m,n)}}}function De(r,t,e){let{data:a}=t,i={Hangaren:{East:a.artworks.filter(l=>l.wall==="east"),West:a.artworks.filter(l=>l.wall==="west"),North:a.artworks.filter(l=>l.wall==="north"),South:a.artworks.filter(l=>l.wall==="south")},Stappen:{"Stappen West":a.artworks.filter(l=>l.wall==="stappen west"),"Stappen South":a.artworks.filter(l=>l.wall==="stappen south")}};function c(l,o){e(1,i[l][o]=[...i[l][o],{title:"",description:"",image_url:"",wall:o.toLowerCase()}],i)}async function h(l,o,w){const{oldIndex:g,newIndex:I}=l.detail,D=i[o][w],[O]=D.splice(g,1);D.splice(I,0,O);const A=D.map((j,L)=>({artwork_id:j.artwork_id,order:L+1}));console.log("updates:",A),await fetch("?/update_order",{method:"POST",body:JSON.stringify({updates:A})})}function v(l){le.call(this,r,l)}const f=async(l,o,w)=>{if(confirm("Are you sure you want to delete this artwork?")){const g=new FormData;g.append("artwork_id",l.artwork_id),(await fetch("?/delete_artwork",{method:"POST",body:g})).ok&&e(1,i[o][w]=i[o][w].filter(D=>D.artwork_id!==l.artwork_id),i)}},m=(l,o)=>{o.dataTransfer.setData("text/plain",l.toString())},d=(l,o,w,g)=>{const I=parseInt(g.dataTransfer.getData("text/plain"));h({detail:{oldIndex:I,newIndex:l}},o,w)},n=(l,o)=>c(l,o);return r.$$set=l=>{"data"in l&&e(0,a=l.data)},[a,i,c,h,v,f,m,d,n]}class Ne extends Kt{constructor(t){super(),Qt(this,t,De,xe,Jt,{data:0})}}export{Ne as component};
